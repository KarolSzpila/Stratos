/*
 * FlightControlModel.cpp
 *
 *  Created on: 28.10.2017
 *      Author: Karol
 */

#include "FlightControl.h"


FlightControl::FlightControl()
{
}


bool FlightControl::FindAircraftByICAO_Address(const std::string& ICAO_Address,AircraftRecord& record)
{
	bool recordFound = false;
	for(auto it = aircrafts.begin(); it != aircrafts.end(); it++)
	{
		if(it->GetICAO_Address() == ICAO_Address)
		{
			record = *it;
			recordFound = true;
			break;
		}
	}

	return recordFound;
}

void FlightControl::AddRecord(const AircraftRecord& record)
{
	aircrafts.push_back(record);
}

bool FlightControl::TickAllRecords(uint32_t ticks)
{
	bool anyRecordExpiered = false;
	for(auto it = aircrafts.begin(); it != aircrafts.end(); it++)
	{
		it->Tick(ticks);
		bool recordExpired = it->IsRecordExpiered();
		if(recordExpired == true)
		{
			anyRecordExpiered |= recordExpired;
			//aircrafts.erase(it);
		}
	}
	return anyRecordExpiered;
}
