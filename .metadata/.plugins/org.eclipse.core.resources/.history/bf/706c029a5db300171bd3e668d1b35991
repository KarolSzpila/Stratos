/**
  ******************************************************************************
  * @file    usbh_rtlsdr.c
  * @author  Victor Pecanins <vpecanins@gmail.com>
  * @version V0.1
  * @date    25/09/2016
  * @brief   RTLSDR Driver for STM32F7 using ST's USBHost
  *
  *
  ******************************************************************************
  * @attention
  *
  * This file can be considered a derived work from librtlsdr.c, a part from
  * the original rtl-sdr package. The routines have been adapted to work in
  * the STM32 USB Host environment, by incorporating them in a hierarchical
  * finite state machine.
  *
  *
  * It follows the original copyright notice from librtlsdr:
  *
  * rtl-sdr, turns your Realtek RTL2832 based DVB dongle into a SDR receiver
  * Copyright (C) 2012-2014 by Steve Markgraf <steve@steve-m.de>
  * Copyright (C) 2012 by Dimitri Stolnikov <horiz0n@gmx.net>
  *
  * This program is free software: you can redistribute it and/or modify
  * it under the terms of the GNU General Public License as published by
  * the Free Software Foundation, either version 2 of the License, or
  * (at your option) any later version.
  *
  * This program is distributed in the hope that it will be useful,
  * but WITHOUT ANY WARRANTY; without even the implied warranty of
  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  * GNU General Public License for more details.
  *
  * You should have received a copy of the GNU General Public License
  * along with this program.  If not, see <http://www.gnu.org/licenses/>.
  *
  *
  * In order to write the code for a specific Class for USBH, the code
  * of CDC Class (found in Middlewares on the ST Cube F7 package) has been
  * modified. It follows the original notice from the ST Middleware code:
  *
  *   * <h2><center>&copy; COPYRIGHT 2015 STMicroelectronics</center></h2>
  *
  * Licensed under MCD-ST Liberty SW License Agreement V2, (the "License");
  * You may not use this file except in compliance with the License.
  * You may obtain a copy of the License at:
  *
  *        http://www.st.com/software_license_agreement_liberty_v2
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  *
  ******************************************************************************
  */

/* Includes ------------------------------------------------------------------*/
#include "usbh_rtlsdr.h"

#include "tuner_e4k.h"
#include "tuner_fc0012.h"
#include "tuner_fc0013.h"
#include "tuner_fc2580.h"
#include "tuner_r82xx.h"

uint8_t buff[512];
/** @addtogroup USBH_LIB
* @{
*/

/** @addtogroup USBH_CLASS
* @{
*/

/** @addtogroup USBH_RTLSDR_CLASS
* @{
*/

/** @defgroup USBH_RTLSDR_CORE
* @brief    This file includes RTLSDR Layer Handlers for USB Host RTLSDR class.
* @{
*/

/** @defgroup USBH_RTLSDR_CORE_Private_TypesDefinitions
* @{
*/
/**
* @}
*/


/** @defgroup USBH_RTLSDR_CORE_Private_Defines
* @{
*/
/**
* @}
*/


/** @defgroup USBH_RTLSDR_CORE_Private_Macros
* @{
*/

/* two raised to the power of n */
#define TWO_POW(n)		((double)(1ULL<<(n)))

/**
* @}
*/


/** @defgroup USBH_RTLSDR_CORE_Private_Variables
* @{
*/
/**
* @}
*/


/** @defgroup USBH_RTLSDR_CORE_Private_FunctionPrototypes
* @{
*/

static USBH_StatusTypeDef USBH_RTLSDR_InterfaceInit  (USBH_HandleTypeDef *phost);

static USBH_StatusTypeDef USBH_RTLSDR_InterfaceDeInit  (USBH_HandleTypeDef *phost);

static USBH_StatusTypeDef USBH_RTLSDR_Process(USBH_HandleTypeDef *phost);

static USBH_StatusTypeDef USBH_RTLSDR_SOFProcess(USBH_HandleTypeDef *phost);

static USBH_StatusTypeDef USBH_RTLSDR_ClassRequest (USBH_HandleTypeDef *phost);


USBH_ClassTypeDef  RTLSDR_Class =
{
  "RTLSDR",
  USB_RTLSDR_CLASS,
  USBH_RTLSDR_InterfaceInit,
  USBH_RTLSDR_InterfaceDeInit,
  USBH_RTLSDR_ClassRequest,
  USBH_RTLSDR_Process,
  USBH_RTLSDR_SOFProcess,
  NULL,
};
/**
* @}
*/


/** @defgroup USBH_RTLSDR_CORE_Private_Functions
* @{
*/

/**
  * @brief  USBH_RTLSDR_InterfaceInit
  *         The function init the RTLSDR class.
  * @param  phost: Host handle
  * @retval USBH Status
  */

/*
uint16_t RTLSDR_read_reg (USBH_HandleTypeDef *phost,
                          uint8_t block,
                          uint16_t addr,
                          uint8_t len)
{

}*/





/* I2C routines */


/* Demod routines */






/* FIR routine */

/**
  * @brief  USBH_RTLSDR_InterfaceDeInit
  *         The function DeInit the Pipes used for the RTLSDR class.
  * @param  phost: Host handle
  * @retval USBH Status
  */








/**
  * @brief  USBH_RTLSDR_ClassRequest
  *         The function is responsible for handling Standard requests
  *         for RTLSDR class.
  * @param  phost: Host handle
  * @retval USBH Status
  */


/**
  * @brief  RTLSDR_probe_tuners
  *         This is a sub-FSM to check what tuner we have.
  * @param  phost: Host handle
  * @retval USBH Status
  */




/**
  * @brief  USBH_RTLSDR_Process
  *         The function is for managing state machine for RTLSDR data transfers
  * @param  phost: Host handle
  * @retval USBH Status
  */
